<!doctype html> <!--[if IE 8]><html class="no-js lt-ie9" lang=en><![endif]--> <!--[if gt IE 8]><!--> <html class=no-js lang=en> <!--<![endif]--> <head> <meta charset=utf-8> <meta name=viewport content="width=device-width"> <title>Drupid</title> <link href="stylesheets/main.css" media=screen rel=stylesheet /> <script src="javascripts/vendor/custom.modernizr.js"></script> <link href="images/favicon.png" rel=icon type="image/png"/> <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-43858007-1', 'lifepillar.github.io');
ga('send', 'pageview');
</script> </head> <body class=index> <article id=life-drupid> <header> <div id=life-waterdrop> <svg id=svg-icon-drop xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 394.41351 554.93317"> <defs> <filter id=filter3537 height="1.5148996" width="1.6155015" y="-0.25744981" x="-0.30775076"> <feGaussianBlur stdDeviation="13.005789"/> </filter> <radialGradient id=radialGradient2469 gradientUnits=userSpaceOnUse cy="658.8" cx="481.4" gradientTransform="matrix(0.7872671,-0.7655289,0.7308466,0.7516002,-2624.3135,375.07591)" r="189.4"> <stop stop-color="#FFF" offset=0 /> <stop stop-color="#FFF" stop-opacity=0 offset=1 /> </radialGradient> <radialGradient id=radialGradient2471 gradientUnits=userSpaceOnUse cy="350.6" cx="271.7" gradientTransform="matrix(0.7324293,0.3957185,-1.2539449,2.3209081,-1740.1977,-738.90764)" r="197.2"> <stop stop-color="#FFF" offset=0 /> <stop stop-color="#FFF" stop-opacity=0 offset=1 /> </radialGradient> <radialGradient id=radialGradient2473 gradientUnits=userSpaceOnUse cy="397.9" cx="457.1" gradientTransform="matrix(-0.629719,-1.4635752,1.4405178,-0.6197981,-2064.264,1124.5056)" r="197.2"> <stop stop-color="#001651" stop-opacity="0.87068963" offset=0 /> <stop stop-color="#0041f1" stop-opacity=0 offset=1 /> </radialGradient> </defs> <g transform="translate(-162.39657,-231.41298)"> <g fill-rule=evenodd transform="translate(2262.8571,200)"> <path opacity="0.69855071" style="marker-end:none;color:#000000;marker-start:none;marker-mid:none;" d="M-1706,394.5c0,105.9-88,191.8-197,191.8s-199-85.9-197-191.8c2-142,111-199.9,197-363.1,91,157.9,197,257.2,197,363.1z" fill-opacity="0.52601157" fill="#0041f1"/> <path opacity="0.69855071" style="marker-end:none;color:#000000;marker-start:none;marker-mid:none;" d="M-1713,394.1c0,101.6-85,184.2-189,184.2-105,0-191-82.6-190-184.2,3-136.4,107-191.9,190-348.7,88,151.6,189,247,189,348.7z" fill="url(#radialGradient2469)"/> <path opacity="0.69855071" style="marker-end:none;color:#000000;marker-start:none;marker-mid:none;" d="M-1716,390.1c0,100.5-84,182-187,182-104,0-189-81.5-187-182,2-134.7,105-189.6,187-344.5,56,499.6,187,244.1,187,344.5z" fill="url(#radialGradient2471)"/> <path opacity="0.69855071" style="marker-end:none;color:#000000;marker-start:none;marker-mid:none;" d="M-1706,394.5c0,105.9-88,191.8-197,191.8s-199-85.9-197-191.8c2-142,111-199.9,197-363.1,91,157.9,197,257.2,197,363.1z" fill="url(#radialGradient2473)"/> <path opacity="0.82318845" style="marker-end:none;color:#000000;marker-start:none;marker-mid:none;" d="m735.7,328.3c0,19.33-24.62,35-55,35s-55-15.67-55-35,24.62-35,55-35,55,15.67,55,35z" fill-opacity="0.80057804" transform="matrix(0.4170185,-0.4923485,0.4851722,0.4172354,-2440.769,431.47041)" filter="url(#filter3537)" fill="#FFF"/> </g> </g> </svg> </div> <h1>Drupid</h1> <p>Drush Makefile <i class=icon-refresh></i> Drupal</p> </header> <section id=life-description> <h2 id=what-is-it>What is it?</h2> <p><i class="icon-tint icon-large"></i> Drupid is a better replacement for <a href="https://github.com/drush-ops/drush">Drush</a>'s <code>drush make</code>. Drupid does not only build a Drupal platform based on a makefile: it <strong>synchronizes</strong> a Drupal's platform with a makefile!</p> <p>Drupid is not a clever guy after all. It basically does only three things:</p> <ul> <li><i class="icon-li icon-ok"></i> synchronizes a site with a makefile;</li> <li><i class="icon-li icon-ok"></i> helps you create patches easily;</li> <li><i class="icon-li icon-ok"></i> generates dependency graphs.</li> </ul> <p>Drupid is not meant to be a replacement for Drush in its entirety. Rather, Drupid just provides a simpler and more efficient way of managing the code of your Drupal sites by exploiting makefiles the way they should.</p> <p>Ah, and Drupid supports <a href="//drupal.org/node/306267">installation profiles</a> and <a href="https://drupal.org/documentation/install/multi-site">multisite</a>, too!</p> <p>Drupid is open-source free software distributed under the MIT license.</p> <form action="https://www.paypal.com/cgi-bin/webscr" class=paypal method=post><input name=cmd type=hidden value=_s-xclick /> <input name=hosted_button_id type=hidden value=JNT25DNHB25FS /> <input type=submit value="I want to donate!"/></form> </section> <section id=life-installation> <div> <h3 id=installation>Installation</h3> <p><code>gem install drupid</code></p> <h3 id=requirements>Requirements</h3> <p><code>curl</code>, <code>git</code>, <code>mktemp</code>, <code>patch</code>, <code>rsync</code></p> <p>…and, well, Ruby!</p> <h3 id=optional-recommended>Optional (recommended)</h3> <p><code>dot</code> (<code>graphviz</code>), <code>drush</code></p> <h3 id=compatibility>Compatibility</h3> <ul> <li>Ruby: <i class=icon-ok></i>1.8.7, <i class=icon-ok></i>1.9, <i class=icon-ok></i>2.0</li> <li>Drupal: <i class=icon-ok></i>6.x, <i class=icon-ok></i>7.x, <i class=icon-remove></i>8.x<sup>*</sup></li> <li>Drush: <i class=icon-ok></i>6, <i class=icon-ok></i>7</li> </ul> <p><small><sup>*</sup>Under development</small></p> </div> </section> <section id=life-sync> <h2 id=synchronization>Synchronization</h2> <p><i class="icon-tint icon-large"></i> The most fundamental Drupid command is</p> <pre class="highlight text">drupid -s mysite.make -p mysite
</pre> <p>where <code>mysite.make</code> is a Drush makefile and <code>mysite</code> is the path to a Drupal site. Drupid compares the current status of <code>mysite</code> with its specification (the makefile) and tries to fix all the differences. Drupid can:</p> <ul> <li><i class="icon-li icon-ok"></i> download and install missing projects and libraries;</li> <li><i class="icon-li icon-ok"></i> update projects and libraries, including Drupal core;</li> <li><i class="icon-li icon-ok"></i> <strong>resolve all project dependencies</strong>;</li> <li><i class="icon-li icon-ok"></i> apply patches;</li> <li><i class="icon-li icon-ok"></i> move projects to a different directory;</li> <li><i class="icon-li icon-ok"></i> verify the integrity of the code.</li> <li><i class="icon-li icon-ok"></i> delete unused projects and libraries.</li> </ul> <p>Drupid always <em>preflights</em> all the changes that should be applied so that, if a problem occurs, your site is not modified in any way.</p> <p>Most important options:</p> <ul> <li><code>-c</code>, <code>--no-core</code>: do not synchronize Drupal core.</li> <li><code>-d</code>, <code>--no-deps</code>: do not automatically follow dependencies.</li> <li><code>-l</code>, <code>--no-libs</code>: do not synchronize external libraries.</li> <li><code>-n</code>, <code>--dry</code>: preflight changes, but do not apply them.</li> <li><code>-f</code>, <code>--force</code>: apply changes even if there are errors.</li> <li><code>-S</code>, <code>--site</code>: (for multisite platforms) specify the site to be synchronized.</li> <li><code>-u</code>, <code>--updatedb</code>: update the site's database after a successful synchronization. This option requires Drush to be installed to take effect.</li> </ul> <p>Note that Drupid can also be used to build Drupal platforms from scratch: just pass to <code>-p</code> a non-existing path.</p> </section> <aside id=life-lock-files> <h3 id=i-classicon-info-sign-icon-largei-makelock-files><i class="icon-info-sign icon-large"></i> make.lock files</h3> <p>After each synchronization, Drupid writes a <code>.make.lock</code> file, which contains all the version information that is needed to re-build your platform from scratch exactly as it was when the <code>.make.lock</code> file was created. You can also use the <code>.make.lock</code> file to quickly verify that your platform has not been tampered:</p> <pre class="highlight text">drupid -s mysite.make.lock -p mysite -n
</pre> <p>Since Drupid caches projects, a command like the above will likely be relatively fast, and it may not even hit the network at all.</p> </aside> <aside id=life-best-practices> <h3 id=i-classicon-thumbs-up-icon-largei-best-practices><i class="icon-thumbs-up icon-large"></i> Best practices</h3> <p>If you use version control (and you should), keeping under version control the <code>.make</code> file and the <code>.make.lock</code> file, together with all the necessary patches, is all you need to maintain a history of your platform changes and the integrity of your platform (provided that you run Drupid from time to time!).</p> <p>Note that, if you use Drupid, the only correct way to change the code of a project is to create a patch, include it in the site's makefile, and run Drupid to synchronize your site. You should never modify a project's code directly!</p> </aside> <section id=life-patch> <h2 id=patches>Patches</h2> <p><i class="icon-tint icon-large"></i> Drupid greatly simplifies the process of creating patches for any project. For example:</p> <pre class="highlight text">drupid --edit drupal-8.x
drupid --edit media-7.x-1.2
drupid --edit http://codemirror.net/codemirror.zip
</pre> <p>Drupid downloads a pristine copy of the specified project in a temporary directory, creates a temporary Git repository, and opens an interactive shell. From there, you may make any changes you wish, using the method you prefer. When you are done, just exit the shell. Puff, the patch will be printed to the standard output. Or you can use <code>--out</code> to specify an output file.</p> <p>If the project you want to patch already exists locally, just do:</p> <pre class="highlight text">cd path/to/myproject
drupid --edit
</pre> </section> <section id=life-graph> <h2 id=dependency-graphs>Dependency graphs</h2> <p><i class="icon-tint icon-large"></i> Sometimes, you may wonder why Drupid has retrieved a given project when there is no trace of it in the makefile. Sure, it's to meet some dependency. To discover which one, or just to take a look at the relationships among the various modules and themes, you may draw a dependency graph from your platform:</p> <pre class="highlight text">drupid --graph -p mysite
</pre> <p>The result is an SVG image, which you can open in any modern browser. And the names of the projects will be searchable!</p> </section> <section id=life-issues> <h2 id=i-classicon-bug-icon-largei-known-issues><i class="icon-bug icon-large"></i> Known Issues</h2> <ul> <li>Drupid can only synchronize local sites.</li> <li>Drupid parses, but ignores, version constraints in makefiles.</li> <li>Drupid is not yet compatible with Drupal 8.</li> </ul> <p>For bug reports and feature requests, create a <a href="//github.com/lifepillar/drupid/issues">Github issue</a>.</p> </section> <section id=life-resources> <h2 id=i-classicon-external-link-icon-largei-resources><i class="icon-external-link icon-large"></i> Resources</h2> <ul> <li><a href="//vimeo.com/51390010">An Introduction to Drupid</a> (a five minute screencast)</li> <li><a href="//drushmake.me">Drush Make Generator</a></li> </ul> </section> <footer> <p id=life-copyright>&copy; Copyright 2012–2013 Lifepillar.</p> <ul id=life-social-links> <li><a href="//github.com/lifepillar/drupid"><i class="icon-github icon-2x"></i></a></li> <li><a href="//twitter.com/lifepillar"><i class="icon-twitter icon-2x"></i></a></li> </ul> <div id=life-logo> <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 141.40345 41.074077"> <path fill="#CCC" d="m67.9,35.47c0,1.444,1.171,2.615,2.615,2.615s2.615-1.171,2.615-2.615v-31.38c0-1.444-1.171-2.615-2.615-2.615s-2.615,1.171-2.615,2.615z"/> <path fill="#c2c2c2" d="m73.65,35.47c0,1.444,0.9367,2.615,2.092,2.615s2.092-1.171,2.092-2.615v-31.38c0-1.444-0.9367-2.615-2.092-2.615s-2.092,1.171-2.092,2.615z"/> <path fill="#c2c2c2" d="m63.19,35.47c0,1.444,0.9367,2.615,2.092,2.615s2.092-1.171,2.092-2.615v-31.38c0-1.444-0.9367-2.615-2.092-2.615s-2.092,1.171-2.092,2.615z"/> <path fill="#b8b8b8" d="m78.36,35.47c0,1.444,0.7025,2.615,1.569,2.615,0.8666,0,1.569-1.171,1.569-2.615v-31.38c0-1.444-0.7025-2.615-1.569-2.615-0.8666,0-1.569,1.171-1.569,2.615z"/> <path fill="#b8b8b8" d="m59.53,35.47c0,1.444,0.7025,2.615,1.569,2.615,0.8666,0,1.569-1.171,1.569-2.615v-31.38c0-1.444-0.7026-2.615-1.569-2.615-0.8666,0-1.569,1.171-1.569,2.615z"/> <path fill="#aeaeae" d="m82.02,35.47c0,1.444,0.4683,2.615,1.046,2.615s1.046-1.171,1.046-2.615v-31.38c0-1.444-0.4683-2.615-1.046-2.615s-1.046,1.171-1.046,2.615z"/> <path fill="#aeaeae" d="m56.92,35.47c0,1.444,0.4683,2.615,1.046,2.615s1.046-1.171,1.046-2.615v-31.38c0-1.444-0.4683-2.615-1.046-2.615s-1.046,1.171-1.046,2.615z"/> <path fill="#a1a1a1" d="m84.64,35.47c0,1.444,0.2342,2.615,0.523,2.615,0.2889,0,0.523-1.171,0.523-2.615v-31.38c0-1.444-0.2342-2.615-0.523-2.615-0.2889,0-0.523,1.171-0.523,2.615z"/> <path fill="#a1a1a1" d="m55.35,35.47c0,1.444,0.2342,2.615,0.523,2.615,0.2889,0,0.523-1.171,0.523-2.615v-31.38c0-1.444-0.2342-2.615-0.523-2.615-0.2889,0-0.523,1.171-0.523,2.615z"/> <path fill="#CCC" d="m86.21,5.753c1.444,0,2.615-1.288,2.615-2.877s-1.171-2.877-2.615-2.877h-31.38c-1.444,0-2.615,1.288-2.615,2.877s1.171,2.877,2.615,2.877z"/> <path fill="#999" d="m0,39.97c23.5,0.7349,47.01,1.102,70.51,1.102h69.11l1.778-1.245c-23.64,0-47.25-1.555-70.89-1.555-23.17,0-46.33,0.3676-69.48,1.102z"/> </svg> <p>I iron my shirts</p> </div> </footer> </article> </body> </html>